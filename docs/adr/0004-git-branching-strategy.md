# ADR-0004: Стратегия веток Git

## Статус
Принято

## Контекст
Проект Dmath - это фронтенд-ориентированное веб-приложение для визуализации алгоритмов дискретной математики. Основные требования:
- Фронтенд на Next.js + React + TypeScript (основная логика на клиенте)
- Минимальный Node.js бэкенд (прокси/аутентификация)
- Java backend для алгоритмов (вторичный)
- Командная разработка 3-5 человек
- Строгие требования к CI/CD и тестированию

## Решение
Использовать стратегию веток с именованием по номерам задач Jira:

### Основные ветки
1. **`master`** - стабильная ветка, всегда готова к продакшену
2. **`develop`** - ветка для интеграции новых функций

### Ветки разработки
3. **`DMATH-XXXX`** - ветки для разработки задач из Jira
   - `DMATH-2313` - настройка Next.js + React + TypeScript
4. **`DMATH-XXXX`** - критические исправления (hotfix задачи)
   - `DMATH-9999` - критическое исправление

### Workflow
- Все задачи разрабатываются в `DMATH-XXXX` ветках от `develop`
- Критические исправления создаются в `DMATH-XXXX` ветках от `master`
- Обязательные PR с ревью для всех изменений
- CI блокирует мерж при падении тестов или низком покрытии
- `develop` мержится в `master` при готовности релиза
- Связь веток с задачами Jira через номера

### Workflow для ADR
1. **Создание ADR** - в отдельной `DMATH-XXXX` ветке от `develop` (отдельная задача в Jira)
2. **Обсуждение** - PR с ADR для ревью командой и преподавателем
3. **Принятие** - после одобрения ADR мержится в `develop`
4. **Реализация** - создание `DMATH-XXXX` веток для реализации решений из ADR
5. **Документирование** - обновление статуса ADR при реализации

## Последствия

### Положительные
- Ориентация на фронтенд-разработку (основное требование ТЗ)
- Прямая связь веток с задачами Jira
- Простота понимания и использования
- Минимальное количество веток для поддержания
- Четкое разделение между разработкой и продакшеном
- Безопасность основного кода через PR процесс
- Соответствие требованиям курсовой работы
- Легкое отслеживание прогресса через Jira

### Отрицательные
- Меньше изоляции между разными функциями
- Потенциальные конфликты при параллельной разработке
- Зависимость от Jira для именования веток

## Альтернативы
- **Feature-based ветки** (`feature/*`): Отклонено в пользу Jira-ориентированного подхода для лучшей интеграции с системой управления задачами
- **GitHub Flow**: Отклонено из-за отсутствия стабильной ветки разработки
- **GitLab Flow**: Отклонено из-за избыточной сложности для курсового проекта
- **Trunk-based development**: Отклонено из-за недостаточной изоляции функций
- **Монолитная ветка**: Отклонено из-за невозможности параллельной разработки в команде
