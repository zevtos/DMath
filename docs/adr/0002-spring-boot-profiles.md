# ADR-0002: Использование Spring Boot профилей

## Статус

Принято

## Контекст

Проект Dmath требует различных конфигураций для разных окружений (разработка, тестирование, продакшн). Необходимо
обеспечить гибкость настройки приложения без изменения кода и возможность использования переменных окружения для
продакшн-деплоя.

## Решение

Использовать Spring Boot профили для разделения конфигураций по окружениям:

- **dev** - профиль по умолчанию для разработки
- **test** - профиль для тестирования
- **prod** - профиль для продакшн-окружения

### Структура конфигурации

1. **application.properties** - базовая конфигурация с активным профилем `dev`
2. **application-dev.properties** - настройки для разработки:
    - Подключение к локальной PostgreSQL
    - Подробное логирование
    - CORS для фронтенд-разработки
    - Отладочная информация

3. **application-prod.properties** - настройки для продакшна:
    - Конфигурация через переменные окружения
    - Минимальное логирование
    - Безопасные настройки CORS
    - Метрики для мониторинга

4. **application-test.properties** - настройки для тестирования:
    - Использование Testcontainers
    - Изолированная база данных

## Последствия

### Положительные

- Четкое разделение конфигураций по окружениям
- Безопасность: секреты в переменных окружения для продакшна
- Гибкость: легко добавлять новые профили
- Простота деплоя: один артефакт для всех окружений
- Соответствие принципам 12-Factor App

### Отрицательные

- Дополнительные файлы конфигурации
- Необходимость документирования различий между профилями

## Альтернативы

- **Единый файл конфигурации**: Отклонено из-за сложности управления секретами
- **Внешние конфигурационные файлы**: Отклонено из-за усложнения деплоя
- **Конфигурация через код**: Отклонено из-за необходимости пересборки при изменении настроек
